// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id       String  @id @default(uuid())
  email    String  @unique
  password String  
  role     String  @default("user") // "admin" или "user"
  companyId String?  
  company  Company? @relation(fields: [companyId], references: [id])  
}

model Company {
  id                   String  @id @default(uuid())
  companyName          String
  shortName            String
  license              String
  inn                 String  @unique
  kpp                 String
  ogrn                String?
  legalAddress        String
  actualAddress       String
  region              String
  bank               String
  account            String
  bik                String
  correspondentAccount String
  directorSurname    String
  directorName       String
  directorPatronymic String
  accountantSurname  String
  accountantName     String
  accountantPatronymic String
  phone              String
  email              String  @unique
  website            String  @unique
  users              User[]
  teachers           Teacher[] // Добавляем связь с преподавателями
}

model Teacher {
  id              String  @id @default(uuid())
  lastName        String
  firstName       String
  middleName      String?
  activityType    String  @default("theory") // "theory" или "practice"
  birthDate       DateTime?
  birthPlace      String
  address         String
  licenseSeries   String?
  licenseNumber   String?
  licenseIssueDate DateTime?
  snils          String  @unique
  companyId       String  
  company        Company @relation(fields: [companyId], references: [id]) // Привязка к компании
}